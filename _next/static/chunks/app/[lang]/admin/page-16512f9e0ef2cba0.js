(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{799:(t,e,n)=>{Promise.resolve().then(n.bind(n,2827))},2827:(t,e,n)=>{"use strict";n.d(e,{Login:()=>J});var a=n(5155),s=n(2115);let o="main";function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"https://api.github.com/repos/".concat("bnz","/").concat("area-next","/contents/public/data/").concat(t,".json").concat(e)}var l=n(4134),c=n(6099);function u(){let[t,e]=(0,s.useState)(""),[n,o]=(0,s.useState)(!1),{loadFile:r}=b(),l=(0,c.s)("button.login"),u=(0,c.s)("password"),i=(0,c.s)("loading");return(0,a.jsx)("div",{className:"max-w-lg mx-auto py-36",children:(0,a.jsxs)("form",{className:"flex gap-4",onSubmit:async function(e){e.preventDefault(),o(!0),await r(f.common,t)},children:[(0,a.jsx)("input",{type:"password",placeholder:u,value:t,autoFocus:!0,onChange:function(t){e(t.target.value)}}),(0,a.jsx)("button",{disabled:n,type:"submit",className:"button",children:n?i:l})]})})}var i=n(4052),d=n.n(i),f=function(t){return t.common="common",t.translations="translations",t.features="features",t.posts="posts",t}({});let p={common:"",translations:"",features:"",posts:""},m={en:p,lv:p,ru:p},x={common:{},translations:{},features:[],posts:[]},h={en:x,lv:x,ru:x},g=(0,s.createContext)({async loadFile(){},async publishData(){},logOut(){},loadedData:x,setLoadedData(){},async loadData(){},async saveData(){},updateRecordData:()=>function(){},updateArrayData:()=>function(){},lang:"en"});function b(){return(0,s.useContext)(g)}let y="loaded-data",j="sha-data",N="token";function v(t){let{children:e,lang:n}=t,i=(0,c.s)("loading"),[f,p]=(0,s.useState)(""),[x,b]=(0,s.useState)(!1),[v,S]=(0,s.useState)(m),[k,C]=(0,s.useState)(h);(0,s.useEffect)(function(){try{let t=localStorage.getItem(y);t&&C(JSON.parse(t||"{}"));let e=localStorage.getItem(j);e&&S(JSON.parse(e||"{}"))}catch(t){console.log(t)}},[C,S]),(0,s.useEffect)(function(){try{let t=localStorage.getItem(N);null!==t&&p(JSON.parse(t))}catch(t){console.log(t)}},[p]);let w=(0,s.useCallback)(async function(t,e){try{let a=await fetch(r("".concat(n,"/").concat(t),"?ref=".concat(o)),{headers:{Authorization:"token ".concat(e||f)}}),s=await a.json();if(s.status)return;return e&&(localStorage.setItem(N,JSON.stringify(e)),p(e)),{content:l.hp.from(s.content,"base64").toString("utf8"),sha:s.sha}}catch(t){console.error(t)}},[n,b,f]),O=(0,s.useCallback)(async function(t,e,a){try{let s=l.hp.from(e).toString("base64"),c=await fetch(r("".concat(n,"/").concat(t)),{method:"PUT",headers:{Authorization:"token ".concat(f),"Content-Type":"application/json"},body:JSON.stringify({message:"i18n update from admin (/".concat(n,"/").concat(t,".json)"),content:s,sha:a,branch:o})}),u=await c.json();if(c.ok)return{sha:u.content.sha};console.error(u)}catch(t){console.error(t)}},[f,n]),I=(0,s.useCallback)(async function(t){if(Object.keys(k[n][t]).length>0)return;let e=await w(t);if(e)try{C(function(a){let s={...a,[n]:{...a[n],[t]:JSON.parse(e.content)}};return localStorage.setItem(y,JSON.stringify(s)),s}),S(function(a){let s={...a,[n]:{...a[n],[t]:e.sha}};return localStorage.setItem(j,JSON.stringify(s)),s})}catch(t){console.log(t)}},[w,k,C,S,n]),D=(0,s.useCallback)(async function(t){try{await O(t,JSON.stringify(k[n][t],null,2),v[n][t])}catch(t){console.log(t)}},[O,v,k,n]),J=(0,s.useCallback)(function(){localStorage.removeItem(N),localStorage.removeItem(y),localStorage.removeItem(j),window.location.reload()},[]),E=d()(function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(t){console.log(t)}},400),V=(0,s.useCallback)(function(t){return function(e){C(function(a){let s={...a,[n]:{...a[n],translations:{...a[n].translations,[t]:e.target.value}}};return E(y,s),s})}},[n,E,C]),z=(0,s.useCallback)(function(t,e){return function(t){C(function(a){let s=structuredClone(a[n].features);s[e][t.target.name]=t.target.value;let o={...a,[n]:{...a[n],features:s}};return E(y,o),o})}},[n,E,C]);return(0,a.jsx)(g.Provider,{value:{loadFile:w,publishData:O,logOut:J,loadedData:k[n],setLoadedData:C,loadData:I,saveData:D,updateRecordData:V,updateArrayData:z,lang:n},children:x?(0,a.jsx)("div",{className:"max-w-lg mx-auto flex items-center justify-center min-h-48",children:i}):f?e:(0,a.jsx)(u,{})})}var S=n(5739);function k(){let{loadedData:t,loadData:e,saveData:n,updateRecordData:o}=b(),r=(0,c.s)("loading"),l=(0,c.s)("button.publish"),[u,i]=(0,s.useState)(!1);(0,s.useEffect)(function(){e(f.translations)},[]);let d=t[f.translations];return 0===Object.keys(d).length?(0,a.jsx)(a.Fragment,{children:r}):(0,a.jsxs)("form",{className:"flex flex-col gap-3 relative",onSubmit:async function(t){t.preventDefault(),i(!0),await n(f.translations),await new Promise(function(t){setTimeout(t,1e3)}),i(!1)},children:[Object.keys(d).map(function(t){return(0,a.jsx)("textarea",{rows:1,defaultValue:d[t],onChange:o(t),className:"min-h-8"},t)}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:"button",children:l})}),u&&(0,a.jsx)("div",{className:"absolute -inset-1 bg-gray-100/90 rounded flex items-center justify-center",children:r})]})}function C(){let{logOut:t}=b(),e=(0,c.s)("button.logout"),n=(0,c.s)("welcome");return(0,a.jsxs)("div",{className:"flex flex-row gap-3 mb-3 px-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:n}),(0,a.jsx)("button",{type:"button",className:"button ml-auto",onClick:t,children:e})]})}function w(){let t=(0,c.s)("button.add"),[e,n]=(0,s.useState)(!1),{loadData:o,loadedData:r,setLoadedData:l,lang:u,saveData:i,updateArrayData:d}=b(),[p,m]=(0,s.useState)({title:"",description:""});(0,s.useEffect)(function(){o(f.features)},[]);let x=r[f.features];return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-5",children:x.map(function(t,e){let{title:n,description:s}=t;return(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_50px] gap-3 outline-1 outline-gray-300 dark:outline-gray-700 mb-5 p-2 rounded",children:[(0,a.jsx)("input",{type:"text",defaultValue:n,placeholder:"Title",name:"title",onChange:d(f.features,e)}),(0,a.jsx)("div",{className:"row-span-2",children:(0,a.jsx)("button",{className:"button",type:"button",onClick:function(){l(function(t){let n=structuredClone(t);return n[u][f.features].splice(e,1),localStorage.setItem(y,JSON.stringify(n)),n})},children:"X"})}),(0,a.jsx)("textarea",{rows:1,placeholder:"Description",defaultValue:s,name:"description",onChange:d(f.features,e)})]},e)})}),(0,a.jsx)("div",{className:"py-3 border-t border-gray-300 dark:border-gray-700",children:e?(0,a.jsxs)("form",{className:"flex flex-col gap-3 p-2.5 m-2.5 bg-gray-100 dark:bg-gray-700 rounded shadow-inner",onSubmit:function(t){t.preventDefault(),l(function(t){let e={...t,[u]:{...t[u],[f.features]:[...t[u][f.features],p]}};return localStorage.setItem(y,JSON.stringify(e)),e}),n(!1)},children:[(0,a.jsx)("input",{type:"text",placeholder:"Title",autoFocus:!0,defaultValue:p.title,onChange:function(t){m(function(e){return{...e,title:t.target.value}})}}),(0,a.jsx)("textarea",{rows:1,placeholder:"Description",defaultValue:p.description,onChange:function(t){m(function(e){return{...e,description:t.target.value}})}}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"button",type:"submit",children:"Save"}),(0,a.jsx)("button",{type:"button",className:"cursor-pointer",onClick:function(){n(function(t){return!t})},children:"Cancel"})]})]}):(0,a.jsx)("button",{className:"button",type:"button",onClick:function(){n(!0)},children:t})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{className:"button",type:"button",onClick:async function(){await i(f.features)},children:(0,c.s)("button.publish")})})]})}var O=n(5695);function I(){let{loadData:t,loadedData:e}=b();(0,s.useEffect)(function(){t(f.posts)},[]);let n=e[f.posts];return(0,a.jsx)("div",{children:n.map(function(t,e){let{slug:n,title:s,image:o,excerpt:r}=t;return(0,a.jsxs)("div",{className:"flex flex-col gap-3 border-b border-gray-200 dark:border-gray-800 py-6",children:[(0,a.jsx)("input",{type:"text",placeholder:"Title",defaultValue:s,name:"title"}),(0,a.jsx)("input",{type:"text",placeholder:"Excerpt",defaultValue:r,name:"excerpt"}),(0,a.jsx)("input",{type:"text",placeholder:"Url",defaultValue:n,name:"slug"})]},e)})})}function D(){let t=(0,O.useSearchParams)(),e=(0,O.useRouter)(),n=t.get("tab"),o=n?parseInt(n,10):0,[r,l]=(0,s.useState)(o);return(0,s.useEffect)(function(){history.replaceState(null,"","?tab=".concat(r))},[r,e]),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto bg-gray-100 dark:bg-gray-700 rounded p-3",children:[(0,a.jsx)(C,{}),(0,a.jsxs)(S.fu,{selectedIndex:r,onChange:l,className:"px-2",children:[(0,a.jsxs)(S.wb,{className:"flex gap-4 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:[(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,c.s)("tab.translations")}),(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,c.s)("tab.features")}),(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,c.s)("tab.posts")}),(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,c.s)("tab.contacts")})]}),(0,a.jsxs)(S.T2,{className:"mt-3 py-3",children:[(0,a.jsx)(S.Kp,{children:(0,a.jsx)(k,{})}),(0,a.jsx)(S.Kp,{children:(0,a.jsx)(w,{})}),(0,a.jsx)(S.Kp,{className:"",children:(0,a.jsx)(I,{})}),(0,a.jsx)(S.Kp,{className:"",children:"contacts tab content"})]})]})]})}function J(t){let{lang:e}=t;return(0,a.jsx)(v,{lang:e,children:(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)(a.Fragment,{}),children:(0,a.jsx)(D,{})})})}},6099:(t,e,n)=>{"use strict";n.d(e,{I18nProvider:()=>r,s:()=>l});var a=n(5155),s=n(2115);let o=(0,s.createContext)({});function r(t){let{children:e,translations:n}=t;return(0,a.jsx)(o.Provider,{value:n,children:e})}function l(t){var e;return null!=(e=(0,s.useContext)(o)[t])?e:"~".concat(t,"~")}}},t=>{var e=e=>t(t.s=e);t.O(0,[965,441,684,358],()=>e(799)),_N_E=t.O()}]);