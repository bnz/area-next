(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{799:(e,t,n)=>{Promise.resolve().then(n.bind(n,829))},829:(e,t,n)=>{"use strict";n.d(t,{Login:()=>E});var a=n(5155),s=n(2115);let r="main";function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"https://api.github.com/repos/".concat("bnz","/").concat("area-next","/contents/data/").concat(e,".json").concat(t)}var l=n(4134),c=n(6099);function i(){let[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(!1),{loadFile:o}=b(),l=(0,c.s)("button.login"),i=(0,c.s)("password"),u=(0,c.s)("loading");return(0,a.jsx)("div",{className:"max-w-lg mx-auto py-36",children:(0,a.jsxs)("form",{className:"flex gap-4",onSubmit:async function(t){t.preventDefault(),r(!0),await o(f.common,e)},children:[(0,a.jsx)("input",{type:"password",placeholder:i,value:e,autoFocus:!0,onChange:function(e){t(e.target.value)}}),(0,a.jsx)("button",{disabled:n,type:"submit",className:"button",children:n?u:l})]})})}var u=n(4052),d=n.n(u),f=function(e){return e.common="common",e.translations="translations",e.features="features",e.posts="posts",e}({});let p={common:"",translations:"",features:"",posts:""},x={en:p,lv:p,ru:p},m={common:{},translations:{},features:[],posts:[]},h={en:m,lv:m,ru:m},g=(0,s.createContext)({async loadFile(){},async publishData(){},logOut(){},loadedData:m,setLoadedData(){},async loadData(){},async saveData(){},updateRecordData:()=>function(){},updateArrayData:()=>function(){},lang:"en",publishLoading:!1,setPublishLoading(){}});function b(){return(0,s.useContext)(g)}let j="loaded-data",y="sha-data",v="token";function N(e){let{children:t,lang:n}=e,u=(0,c.s)("loading"),[f,p]=(0,s.useState)(""),[m,b]=(0,s.useState)(!1),[N,S]=(0,s.useState)(x),[k,C]=(0,s.useState)(h),[w,O]=(0,s.useState)(!1);(0,s.useEffect)(function(){try{let e=localStorage.getItem(j);e&&C(JSON.parse(e||"{}"));let t=localStorage.getItem(y);t&&S(JSON.parse(t||"{}"))}catch(e){console.log(e)}},[C,S]),(0,s.useEffect)(function(){try{let e=localStorage.getItem(v);null!==e&&p(JSON.parse(e))}catch(e){console.log(e)}},[p]);let I=(0,s.useCallback)(function(e,t){S(function(a){let s={...a,[n]:{...a[n],[e]:t}};return localStorage.setItem(y,JSON.stringify(s)),s})},[n]),D=(0,s.useCallback)(async function(e,t){try{let a=await fetch(o("".concat(n,"/").concat(e),"?ref=".concat(r)),{headers:{Authorization:"token ".concat(t||f)}}),s=await a.json();if(s.status)return;return t&&(localStorage.setItem(v,JSON.stringify(t)),p(t)),{content:l.hp.from(s.content,"base64").toString("utf8"),sha:s.sha}}catch(e){console.error(e)}},[n,b,f]),J=(0,s.useCallback)(async function(e,t,a){try{let s=l.hp.from(t).toString("base64"),c=await fetch(o("".concat(n,"/").concat(e)),{method:"PUT",headers:{Authorization:"token ".concat(f),"Content-Type":"application/json"},body:JSON.stringify({message:"i18n update from admin (/".concat(n,"/").concat(e,".json)"),content:s,sha:a,branch:r})}),i=await c.json();if(c.ok)return{sha:i.content.sha};console.error(i)}catch(e){console.error(e)}},[f,n]),E=(0,s.useCallback)(async function(e){if(Object.keys(k[n][e]).length>0)return;let t=await D(e);if(t)try{C(function(a){let s={...a,[n]:{...a[n],[e]:JSON.parse(t.content)}};return localStorage.setItem(j,JSON.stringify(s)),s}),I(e,t.sha)}catch(e){console.log(e)}},[D,k,C,n]),V=(0,s.useCallback)(async function(e){try{O(!0);let t=await J(e,JSON.stringify(k[n][e],null,2),N[n][e]);t&&I(e,t.sha),O(!1)}catch(e){console.log(e)}},[J,N,k,n,O]),_=(0,s.useCallback)(function(){localStorage.removeItem(v),localStorage.removeItem(j),localStorage.removeItem(y),window.location.reload()},[]),z=d()(function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e)}},400),P=(0,s.useCallback)(function(e){return function(t){C(function(a){let s={...a,[n]:{...a[n],translations:{...a[n].translations,[e]:t.target.value}}};return z(j,s),s})}},[n,z,C]),F=(0,s.useCallback)(function(e,t){return function(a){C(function(s){let r=structuredClone(s[n][e]);r[t][a.target.name]=a.target.value;let o={...s,[n]:{...s[n],[e]:r}};return z(j,o),o})}},[n,z,C]);return(0,a.jsx)(g.Provider,{value:{loadFile:D,publishData:J,logOut:_,loadedData:k[n],setLoadedData:C,loadData:E,saveData:V,updateRecordData:P,updateArrayData:F,lang:n,publishLoading:w,setPublishLoading:O},children:m?(0,a.jsx)("div",{className:"max-w-lg mx-auto flex items-center justify-center min-h-48",children:u}):f?t:(0,a.jsx)(i,{})})}var S=n(5739);function k(e){let{filename:t}=e,{saveData:n,publishLoading:s}=b(),r=(0,c.s)("loading");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{className:"button",type:"button",onClick:async function(){await n(t)},children:(0,c.s)("button.publish")})}),s&&(0,a.jsx)("div",{className:"absolute -inset-1 bg-gray-100/90 rounded flex items-center justify-center",children:r})]})}function C(){let{loadedData:e,loadData:t,saveData:n,updateRecordData:r,publishLoading:o}=b(),l=(0,c.s)("loading");(0,s.useEffect)(function(){t(f.translations)},[]);let i=e[f.translations];return 0===Object.keys(i).length?(0,a.jsx)(a.Fragment,{children:l}):(0,a.jsxs)("div",{className:"flex flex-col gap-3 relative",children:[Object.keys(i).map(function(e){return(0,a.jsx)("textarea",{rows:1,defaultValue:i[e],onChange:r(e)},e)}),(0,a.jsx)(k,{filename:f.translations})]})}function w(){let{logOut:e}=b(),t=(0,c.s)("button.logout"),n=(0,c.s)("welcome");return(0,a.jsxs)("div",{className:"flex flex-row gap-3 mb-3 px-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:n}),(0,a.jsx)("button",{type:"button",className:"button ml-auto",onClick:e,children:t})]})}function O(){let e=(0,c.s)("button.add"),[t,n]=(0,s.useState)(!1),{loadData:r,loadedData:o,setLoadedData:l,lang:i,updateArrayData:u}=b(),[d,p]=(0,s.useState)({title:"",description:""});(0,s.useEffect)(function(){r(f.features)},[]);let x=o[f.features];return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"mb-5",children:x.map(function(e,t){let{title:n,description:s}=e;return(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_35px] gap-3 outline-1 outline-gray-300 dark:outline-gray-700 mb-5 p-2 rounded",children:[(0,a.jsx)("input",{type:"text",defaultValue:n,placeholder:"Title",name:"title",onChange:u(f.features,t)}),(0,a.jsx)("div",{className:"row-span-2 flex items-center justify-center",children:(0,a.jsx)("button",{className:"button",type:"button",onClick:function(){l(function(e){let n=structuredClone(e);return n[i][f.features].splice(t,1),localStorage.setItem(j,JSON.stringify(n)),n})},children:"X"})}),(0,a.jsx)("textarea",{rows:1,placeholder:"Description",defaultValue:s,name:"description",onChange:u(f.features,t)})]},t)})}),(0,a.jsx)("div",{className:"py-3 border-t border-gray-300 dark:border-gray-700",children:t?(0,a.jsxs)("form",{className:"flex flex-col gap-3 p-2.5 m-2.5 bg-gray-100 dark:bg-gray-700 rounded shadow-inner",onSubmit:function(e){e.preventDefault(),l(function(e){let t={...e,[i]:{...e[i],[f.features]:[...e[i][f.features],d]}};return localStorage.setItem(j,JSON.stringify(t)),t}),n(!1)},children:[(0,a.jsx)("input",{type:"text",placeholder:"Title",autoFocus:!0,defaultValue:d.title,onChange:function(e){p(function(t){return{...t,title:e.target.value}})}}),(0,a.jsx)("textarea",{rows:1,placeholder:"Description",defaultValue:d.description,onChange:function(e){p(function(t){return{...t,description:e.target.value}})}}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"button",type:"submit",children:"Save"}),(0,a.jsx)("button",{type:"button",className:"cursor-pointer",onClick:function(){n(function(e){return!e})},children:"Cancel"})]})]}):(0,a.jsx)("button",{className:"button",type:"button",onClick:function(){n(!0)},children:e})}),(0,a.jsx)(k,{filename:f.features})]})}var I=n(5695);function D(){let{loadData:e,loadedData:t}=b();(0,s.useEffect)(function(){e(f.posts)},[]);let n=t[f.posts];return(0,a.jsxs)("div",{className:"relative",children:[n.map(function(e,t){let{slug:n,title:s,image:r,excerpt:o,content:l}=e;return(0,a.jsxs)("div",{className:"grid grid-cols-[2fr_1fr] gap-3 border-b border-gray-200 dark:border-gray-800 py-6",children:[(0,a.jsx)("input",{type:"text",placeholder:"Url",defaultValue:n,name:"slug"}),(0,a.jsx)("div",{className:"outline-1 rounded row-span-4",children:"img"}),(0,a.jsx)("input",{type:"text",placeholder:"Title",defaultValue:s,name:"title"}),(0,a.jsx)("input",{type:"text",placeholder:"Excerpt",defaultValue:o,name:"excerpt"}),(0,a.jsx)("textarea",{placeholder:"Content",defaultValue:l,name:"content"})]},t)}),(0,a.jsx)(k,{filename:f.posts})]})}function J(){let e=(0,I.useSearchParams)(),t=(0,I.useRouter)(),n=e.get("tab"),r=n?parseInt(n,10):0,[o,l]=(0,s.useState)(r);return(0,s.useEffect)(function(){history.replaceState(null,"","?tab=".concat(o))},[o,t]),(0,a.jsxs)("div",{className:"max-w-5xl bg-gray-100 dark:bg-gray-700 rounded px-1 py-3 lg:px-3 mx-2 lg:mx-auto shadow",children:[(0,a.jsx)(w,{}),(0,a.jsxs)(S.fu,{selectedIndex:o,onChange:l,className:"px-2",children:[(0,a.jsxs)(S.wb,{className:"flex gap-4 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded overflow-auto scrollbar-hide",children:[(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,c.s)("tab.translations")}),(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,c.s)("tab.features")}),(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,c.s)("tab.posts")}),(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,c.s)("tab.contacts")})]}),(0,a.jsxs)(S.T2,{className:"mt-3 py-3",children:[(0,a.jsx)(S.Kp,{children:(0,a.jsx)(C,{})}),(0,a.jsx)(S.Kp,{children:(0,a.jsx)(O,{})}),(0,a.jsx)(S.Kp,{className:"",children:(0,a.jsx)(D,{})}),(0,a.jsx)(S.Kp,{className:"",children:"contacts tab content"})]})]})]})}function E(e){let{lang:t}=e;return(0,a.jsx)(N,{lang:t,children:(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)(a.Fragment,{}),children:(0,a.jsx)(J,{})})})}},6099:(e,t,n)=>{"use strict";n.d(t,{I18nProvider:()=>o,s:()=>l});var a=n(5155),s=n(2115);let r=(0,s.createContext)({});function o(e){let{children:t,translations:n}=e;return(0,a.jsx)(r.Provider,{value:n,children:t})}function l(e){var t;return null!=(t=(0,s.useContext)(r)[e])?t:"~".concat(e,"~")}}},e=>{var t=t=>e(e.s=t);e.O(0,[965,441,684,358],()=>t(799)),_N_E=e.O()}]);