(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{125:(e,t,n)=>{"use strict";n.d(t,{Login:()=>D});var a=n(5155),s=n(6593),l=n(5739),r=n(2115),o=n(6099);function c(e){let{filename:t,allLangs:n}=e,{saveData:l,publishLoading:r}=(0,s.z8)(),c=(0,o.s)("loading");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{className:"button",type:"button",onClick:async function(){await l(t,n)},children:(0,o.s)("button.publish")})}),r&&(0,a.jsx)("div",{className:"absolute -inset-1 bg-gray-100/90 dark:bg-gray-700/90 rounded flex items-center justify-center",children:c})]})}function i(){let{loadedData:e,loadData:t,saveData:n,updateRecordData:l,publishLoading:i}=(0,s.z8)(),u=(0,o.s)("loading");(0,r.useEffect)(function(){t(s.Ki.translations)},[]);let d=e[s.Ki.translations];return 0===Object.keys(d).length?(0,a.jsx)(a.Fragment,{children:u}):(0,a.jsxs)("div",{className:"flex flex-col gap-3 relative",children:[Object.keys(d).map(function(e){return(0,a.jsxs)("label",{children:[(0,a.jsx)("div",{className:"text-xs font-sans",children:e}),(0,a.jsx)("textarea",{rows:1,defaultValue:d[e],onChange:l(e)})]},e)}),(0,a.jsx)(c,{filename:s.Ki.translations})]})}function u(){let{logOut:e}=(0,s.z8)(),t=(0,o.s)("button.logout"),n=(0,o.s)("welcome");return(0,a.jsxs)("div",{className:"flex flex-row gap-3 mb-3 px-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:n}),(0,a.jsx)("button",{type:"button",className:"button ml-auto",onClick:e,children:t})]})}function d(){let e=(0,o.s)("label.title"),t=(0,o.s)("label.description"),{loadedData:n,updateArrayData:l,removeFromArrayData:c,loadData:i}=(0,s.z8)();return(0,r.useEffect)(function(){i(s.Ki.features)},[i]),n[s.Ki.features].map(function(n,r){let{title:o,description:i}=n,u=l(s.Ki.features,r);return(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_35px] gap-3 outline-1 outline-gray-300 dark:outline-gray-700 mb-5 p-2 rounded",children:[(0,a.jsx)("input",{type:"text",defaultValue:o,placeholder:e,name:"title",onChange:u}),(0,a.jsx)("div",{className:"row-span-2 flex items-center justify-center",children:(0,a.jsx)("button",{className:"button",type:"button",onClick:function(){c(s.Ki.features,r)},children:"X"})}),(0,a.jsx)("textarea",{rows:1,placeholder:t,defaultValue:i,name:"description",onChange:u})]},r)})}function f(){let e=(0,o.s)("button.add"),t=(0,o.s)("label.title"),n=(0,o.s)("label.description"),l=(0,o.s)("button.cancel"),c=(0,o.s)("button.save"),[i,u]=(0,r.useState)(!1),{setLoadedData:d,lang:f}=(0,s.z8)(),[p,x]=(0,r.useState)({title:"",description:""}),m=(0,r.useCallback)(function(e){x(function(t){return{...t,[e.target.name]:e.target.value}})},[x]),g=(0,r.useCallback)(function(){u(!1)},[u]),b=(0,r.useCallback)(function(){u(!0)},[u]);return i?(0,a.jsxs)("form",{className:"flex flex-col gap-3 p-2.5 m-2.5 bg-gray-100 dark:bg-gray-700 rounded shadow-inner",onSubmit:function(e){e.preventDefault(),d(function(e){let t={...e,[f]:{...e[f],[s.Ki.features]:[...e[f][s.Ki.features],p]}};return localStorage.setItem(s.BY,JSON.stringify(t)),t}),g()},children:[(0,a.jsx)("input",{type:"text",name:"title",placeholder:t,autoFocus:!0,defaultValue:p.title,onChange:m}),(0,a.jsx)("textarea",{rows:1,placeholder:n,defaultValue:p.description,name:"description",onChange:m}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"button",type:"submit",children:c}),(0,a.jsx)("button",{type:"button",className:"cursor-pointer",onClick:g,children:l})]})]}):(0,a.jsx)("button",{className:"button",type:"button",onClick:b,children:e})}function p(){return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"mb-5",children:(0,a.jsx)(d,{})}),(0,a.jsx)("div",{className:"py-3 border-t border-gray-300 dark:border-gray-700",children:(0,a.jsx)(f,{})}),(0,a.jsx)(c,{filename:s.Ki.features})]})}var x=n(5695);function m(e){let{name:t,onChange:n,defaultValue:s}=e,l=(0,r.useRef)(null);return(0,a.jsx)("input",{required:!1,type:"datetime-local",ref:l,onClick:function(){var e,t;null==(t=l.current)||null==(e=t.showPicker)||e.call(t)},className:"cursor-pointer",name:t,onChange:n,defaultValue:s})}var g=n(4437);let b={slug:"",title:"",image:"",excerpt:"",content:"",datetime:""};function h(){let e=(0,o.s)("button.add"),t=(0,o.s)("button.cancel"),n=(0,o.s)("button.save"),l=(0,o.s)("label.url"),c=(0,o.s)("label.title"),i=(0,o.s)("label.excerpt"),u=(0,o.s)("label.content"),d=(0,o.s)("error.message.slug.uniquer"),{loadedData:f,setLoadedData:p,lang:x,saveToLocalStorage:h}=(0,s.z8)(),[j,y]=(0,r.useState)(!1),[v,C,N]=function(e){let[t,n]=(0,r.useState)(e);return[t,(0,r.useCallback)(function(e){n(function(t){return{...t,[e.target.name]:e.target.value}})},[n]),(0,r.useCallback)(function(){n(e)},[n,e])]}(b),[k,S]=(0,r.useState)({}),w=(0,r.useCallback)(function(){y(!0)},[y]),K=(0,r.useCallback)(function(){y(!1),N()},[y,N]),z=(0,r.useCallback)(function(e){if(e.preventDefault(),f[s.Ki.posts].map(function(e){let{slug:t}=e;return t}).includes(v.slug))return void S({slug:d});p(function(e){let t=g.U.filter(function(e){return e!==x}),n={...e,[x]:{...e[x],[s.Ki.posts]:[...e[x][s.Ki.posts],v]}},a=n[x][s.Ki.posts].length-1,l=structuredClone(n);return t.map(function(e){l[e][s.Ki.posts][a]?(l[e][s.Ki.posts][a].slug=v.slug,l[e][s.Ki.posts][a].datetime=v.datetime):l[e][s.Ki.posts][a]={slug:v.slug,datetime:v.datetime,image:"",content:"",excerpt:"",title:""}}),h(l),l}),K()},[f,K,p,x,v,h,S,d]);return j?(0,a.jsxs)("form",{className:"flex flex-col gap-3 p-2.5 m-2.5 bg-gray-100 dark:bg-gray-700 rounded shadow-inner",onSubmit:z,children:[(0,a.jsx)("input",{required:!1,autoFocus:!0,type:"text",placeholder:l,name:"slug",onChange:C}),k.slug&&(0,a.jsx)("div",{className:"text-red-500 italic",children:k.slug}),(0,a.jsx)("input",{required:!1,type:"text",placeholder:c,name:"title",onChange:C}),(0,a.jsx)(m,{name:"datetime",onChange:C}),(0,a.jsx)("input",{required:!1,type:"text",placeholder:i,name:"excerpt",onChange:C}),(0,a.jsx)("textarea",{required:!1,placeholder:u,name:"content",onChange:C}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"button",type:"submit",children:n}),(0,a.jsx)("button",{type:"button",className:"cursor-pointer",onClick:K,children:t})]})]}):(0,a.jsx)("button",{type:"button",className:"button",onClick:w,children:e})}function j(e){let{index:t}=e,{uploadImage:n,updateArrayData:l}=(0,s.z8)(),[o,c]=(0,r.useState)(null),[i,u]=(0,r.useState)(null),[d,f]=(0,r.useState)("");async function p(){if(i){f("Loading...");try{let e=await n(i);l(s.Ki.posts,t)({target:{name:"image",value:e}}),f("Uploaded: /".concat(e))}catch(e){console.error(e),f("Upload failed")}}}return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let n=null==(t=e.target.files)?void 0:t[0];if(n){u(n);let e=new FileReader;e.onloadend=()=>c(e.result),e.readAsDataURL(n)}}}),o&&(0,a.jsx)("img",{src:o,alt:"preview",className:"w-full max-w-sm rounded border"}),(0,a.jsx)("button",{onClick:p,disabled:!i,className:"bg-emerald-600 text-white px-4 py-2 rounded disabled:opacity-50",children:"Загрузить"}),d&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:d})]})}var y=n(9300),v=n.n(y);function C(e){let{open:t,onClose:n,children:s,maxWidth:l="max-w-4xl"}=e,c=(0,r.useRef)(null);return(0,r.useEffect)(function(){let e=c.current;e&&(t&&!e.open?e.showModal():!t&&e.open&&e.close())},[t]),(0,r.useEffect)(function(){let e=c.current;if(e)return e.addEventListener("close",t),function(){e.removeEventListener("close",t)};function t(){return n()}},[n]),(0,a.jsxs)("dialog",{ref:c,className:v()("dark:backdrop:bg-black/50 backdrop:bg-white/50 rounded-lg p-6 w-full fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 shadow","bg-gray-100 dark:bg-gray-700",l),children:[(0,a.jsx)("button",{className:"absolute right-0 top-0 cursor-pointer",onClick:n,children:(0,o.s)("button.close")}),(0,a.jsx)("div",{children:s})]})}function N(e){let{index:t,filename:n,onClose:l}=e,{getImagesList:o,setLoadedData:c,lang:i}=(0,s.z8)(),[u,d]=(0,r.useState)([]);return(0,r.useEffect)(function(){!async function(){d((await o()).map(function(e){let{name:t,path:n}=e;return{name:t,path:n.replace("public/","/")}}))}()},[o,d]),(0,a.jsx)("div",{className:"flex gap-3 flex-wrap",children:u.map(function(e,r){let{name:o,path:u}=e;return(0,a.jsx)("img",{src:u,alt:"",className:"w-40 h-40 object-cover rounded cursor-pointer hover:shadow-xl",onClick:function(){c(function(e){let a=structuredClone(e);return a[i][n][t].image=u,localStorage.setItem(s.BY,JSON.stringify(a)),a}),l()}},r)})})}function k(e){let{image:t,index:n,filename:l}=e,c=(0,o.s)("button.delete"),i=(0,o.s)("button.replace"),u=(0,o.s)("label.or"),d=(0,o.s)("button.choose"),{setLoadedData:f,lang:p}=(0,s.z8)(),[x,m]=(0,r.useState)(-1),g=(0,r.useCallback)(function(){m(n)},[m,n]),b=(0,r.useCallback)(function(){m(-1)},[m]),h=(0,r.useCallback)(function(e){return function(){f(function(t){let n=structuredClone(t);return n[p][l][e].image="",localStorage.setItem(s.BY,JSON.stringify(n)),n})}},[p,f,l]);return(0,a.jsxs)(a.Fragment,{children:[""!==t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:t,alt:"",className:"rounded max-w-[200px]"}),(0,a.jsxs)("div",{className:"flex gap-3 p-3",children:[(0,a.jsx)("button",{type:"button",className:"button",onClick:h(n),children:c}),(0,a.jsx)("button",{type:"button",className:"button",onClick:g,children:i})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{index:n}),(0,a.jsx)("div",{children:u}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"button",className:"button",onClick:g,children:d})})]}),x>-1&&(0,a.jsx)(C,{open:!0,onClose:b,children:(0,a.jsx)(N,{index:x,filename:l,onClose:b})})]})}function S(e){let{index:t}=e,n=(0,o.s)("areYouSure"),l=(0,o.s)("button.cancel"),c=(0,o.s)("button.delete"),{removeFromArrayData:i}=(0,s.z8)(),[u,d]=(0,r.useState)(-1),f=(0,r.useCallback)(function(){d(-1)},[d]),p=(0,r.useCallback)(function(){i(s.Ki.posts,t),d(-1)},[t,i,d]),x=(0,r.useCallback)(function(){d(t)},[t,d]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{type:"button",className:"button",onClick:x,children:"X"}),u>-1&&(0,a.jsxs)(C,{maxWidth:"max-w-xl",open:!0,onClose:f,children:[(0,a.jsx)("h5",{className:"text-gray-800 dark:text-gray-100 text-center p-5",children:n}),(0,a.jsxs)("div",{className:"flex justify-center items-center gap-3",children:[(0,a.jsx)("button",{type:"button",className:"button",onClick:f,children:l}),(0,a.jsx)("button",{type:"button",className:"button",onClick:p,children:c})]})]})]})}function w(){let e=(0,o.s)("label.url"),t=(0,o.s)("label.title"),n=(0,o.s)("label.excerpt"),l=(0,o.s)("label.content"),{loadedData:c,setLoadedData:i,loadData:u,lang:d,saveToLocalStorage:f}=(0,s.z8)();(0,r.useEffect)(function(){u(s.Ki.posts)},[]);let p=c[s.Ki.posts]||[],x=(0,r.useCallback)(function(e){return function(t){i(function(n){let a=structuredClone(n),l=t.target.name;return a[d][s.Ki.posts][e]={...a[d][s.Ki.posts][e],[l]:t.target.value},("slug"===l||"datetime"===l)&&g.U.map(function(n){a[n][s.Ki.posts][e][l]=t.target.value}),f(a),a})}},[i,d]);return p.map(function(r,o){let{slug:c,title:i,image:u,excerpt:d,content:f,datetime:p}=r,g=x(o);return(0,a.jsxs)("div",{className:"grid grid-cols-[2fr_1fr] gap-3 border-b border-gray-200 dark:border-gray-800 py-6 mb-3",children:[(0,a.jsx)("input",{required:!0,type:"text",placeholder:e,defaultValue:c,name:"slug",onChange:g}),(0,a.jsxs)("div",{className:"rounded row-span-4 flex",children:[(0,a.jsx)("div",{className:"flex-1 pr-5",children:(0,a.jsx)(k,{image:u,index:o,filename:s.Ki.posts})}),(0,a.jsx)("div",{children:(0,a.jsx)(S,{index:o})})]}),(0,a.jsx)("input",{required:!0,type:"text",placeholder:t,defaultValue:i,name:"title",onChange:g}),(0,a.jsx)(m,{name:"datetime",onChange:g,defaultValue:p}),(0,a.jsx)("input",{required:!0,type:"text",placeholder:n,defaultValue:d,name:"excerpt",onChange:g}),(0,a.jsx)("textarea",{required:!0,placeholder:l,defaultValue:f,name:"content",onChange:g})]},o)})}function K(){return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(w,{}),(0,a.jsx)(h,{}),(0,a.jsx)(c,{filename:s.Ki.posts,allLangs:!0})]})}function z(){let e=(0,o.s)("label.title"),t=(0,o.s)("label.subTitle"),{loadedData:n,loadData:l,updateArrayData:c}=(0,s.z8)();return(0,r.useEffect)(function(){l(s.Ki.splits)},[l]),n[s.Ki.splits].map(function(n,l){let{title:r,subTitle:o,image:i}=n,u=c(s.Ki.splits,l);return(0,a.jsxs)("div",{className:"grid grid-cols-[2fr_1fr] gap-3 py-3 mb-3 border-b border-gray-200 dark:border-gray-800",children:[(0,a.jsx)("textarea",{rows:1,placeholder:e,defaultValue:r,name:"title",onChange:u}),(0,a.jsx)("div",{className:"row-span-2",children:(0,a.jsx)(k,{image:i,index:l,filename:s.Ki.splits})}),(0,a.jsx)("textarea",{rows:1,placeholder:t,defaultValue:o,name:"subTitle",onChange:u})]},l)})}let O={title:"",subTitle:"",image:""};function I(){let e=(0,o.s)("button.add"),t=(0,o.s)("button.cancel"),n=(0,o.s)("button.save"),l=(0,o.s)("label.title"),c=(0,o.s)("label.subTitle"),{setLoadedData:i,lang:u}=(0,s.z8)(),[d,f]=(0,r.useState)(!1),p=(0,r.useCallback)(function(){f(!0)},[f]),[x,m]=(0,r.useState)(O),g=(0,r.useCallback)(function(e){m(function(t){return{...t,[e.target.name]:e.target.value}})},[m]),b=(0,r.useCallback)(function(){f(!1),m(O)},[f,m]),h=(0,r.useCallback)(function(e){e.preventDefault(),i(function(e){let t={...e,[u]:{...e[u],[s.Ki.splits]:[...e[u][s.Ki.splits],x]}};return localStorage.setItem(s.BY,JSON.stringify(t)),t}),b()},[b,i,u,x]);return(0,a.jsx)(a.Fragment,{children:d?(0,a.jsxs)("form",{className:"flex flex-col gap-3 p-2.5 m-2.5 bg-gray-100 dark:bg-gray-700 rounded shadow-inner",onSubmit:h,children:[(0,a.jsx)("textarea",{placeholder:l,name:"title",onChange:g}),(0,a.jsx)("textarea",{placeholder:c,name:"subTitle",onChange:g}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"button",type:"submit",children:n}),(0,a.jsx)("button",{type:"button",className:"cursor-pointer",onClick:b,children:t})]})]}):(0,a.jsx)("button",{type:"button",className:"button",onClick:p,children:e})})}function E(){return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(z,{}),(0,a.jsx)(I,{}),(0,a.jsx)(c,{filename:s.Ki.splits})]})}function F(){let e=(0,x.useSearchParams)(),t=(0,x.useRouter)(),n=e.get("tab"),s=n?parseInt(n,10):0,[c,d]=(0,r.useState)(s);return(0,r.useEffect)(function(){history.replaceState(null,"","?tab=".concat(c))},[c,t]),(0,a.jsxs)("div",{className:"max-w-5xl bg-gray-100 dark:bg-gray-700 rounded px-1 py-3 lg:px-3 mx-2 lg:mx-auto shadow",children:[(0,a.jsx)(u,{}),(0,a.jsxs)(l.fu,{selectedIndex:c,onChange:d,className:"px-2",children:[(0,a.jsxs)(l.wb,{className:"flex gap-4 bg-gray-100 dark:bg-gray-800 px-px py-1 rounded overflow-auto scrollbar-hide",children:[(0,a.jsx)(l.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,o.s)("tab.translations")}),(0,a.jsx)(l.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,o.s)("tab.features")}),(0,a.jsx)(l.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,o.s)("tab.posts")}),(0,a.jsx)(l.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,o.s)("tab.split.sections")})]}),(0,a.jsxs)(l.T2,{className:"mt-3 py-3",children:[(0,a.jsx)(l.Kp,{children:(0,a.jsx)(i,{})}),(0,a.jsx)(l.Kp,{children:(0,a.jsx)(p,{})}),(0,a.jsx)(l.Kp,{children:(0,a.jsx)(K,{})}),(0,a.jsx)(l.Kp,{children:(0,a.jsx)(E,{})})]})]})]})}function D(e){let{lang:t}=e;return(0,a.jsx)(s.X7,{lang:t,children:(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(a.Fragment,{}),children:(0,a.jsx)(F,{})})})}},799:(e,t,n)=>{Promise.resolve().then(n.bind(n,125))},4437:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});let a=["en","lv","ru"]},6099:(e,t,n)=>{"use strict";n.d(t,{I18nProvider:()=>r,s:()=>o});var a=n(5155),s=n(2115);let l=(0,s.createContext)({keys:{},features:[],posts:[],splits:[]});function r(e){let{children:t,translations:n}=e;return(0,a.jsx)(l.Provider,{value:n,children:t})}function o(e){var t,n;let a=(0,s.useContext)(l);return"features"===e||"posts"===e?null!=(t=a[e])?t:"~".concat(e,"~"):null!=(n=a.keys[e])?n:"~".concat(e,"~")}},6593:(e,t,n)=>{"use strict";n.d(t,{X7:()=>k,BY:()=>v,Ki:()=>x,z8:()=>y});var a=n(5155),s=n(2115);let l="area-next",r="main";function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"https://api.github.com/repos/".concat("bnz","/").concat(l,"/contents/data/").concat(e,".json").concat(t)}var c=n(4134),i=n(6099);function u(){let[e,t]=(0,s.useState)(""),[n,l]=(0,s.useState)(!1),{loadFile:r}=y(),o=(0,i.s)("button.login"),c=(0,i.s)("password"),u=(0,i.s)("loading");return(0,a.jsx)("div",{className:"max-w-lg mx-auto py-36 px-4 md:px-0",children:(0,a.jsxs)("form",{className:"flex max-md:flex-col gap-4",onSubmit:async function(t){t.preventDefault(),l(!0),await r(x.common,e)},children:[(0,a.jsx)("input",{type:"password",placeholder:c,value:e,autoFocus:!0,className:"max-md:text-center",onChange:function(e){t(e.target.value)}}),(0,a.jsx)("button",{disabled:n,type:"submit",className:"button",children:n?u:o})]})})}var d=n(4437),f=n(4052),p=n.n(f),x=function(e){return e.common="common",e.translations="translations",e.features="features",e.posts="posts",e.splits="splits",e}({});let m={common:"",translations:"",features:"",posts:"",splits:""},g={en:m,lv:m,ru:m},b={common:{},translations:{},features:[],posts:[],splits:[]},h={en:b,lv:b,ru:b},j=(0,s.createContext)({async loadFile(){},async publishData(){},logOut(){},loadedData:b,setLoadedData(){},async loadData(){},async saveData(){},updateRecordData:()=>function(){},updateArrayData:()=>function(){},lang:"en",publishLoading:!1,setPublishLoading(){},async uploadImage(){},async getImagesList(){},removeFromArrayData(){},saveToLocalStorage(){}});function y(){return(0,s.useContext)(j)}let v="loaded-data",C="sha-data",N="token";function k(e){let{children:t,lang:n}=e,f=(0,i.s)("loading"),[x,m]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1),[k,S]=(0,s.useState)(g),[w,K]=(0,s.useState)(h),[z,O]=(0,s.useState)(!1);(0,s.useEffect)(function(){try{let e=localStorage.getItem(v);e&&K(JSON.parse(e||"{}"));let t=localStorage.getItem(C);t&&S(JSON.parse(t||"{}"))}catch(e){console.log(e)}},[K,S]),(0,s.useEffect)(function(){try{let e=localStorage.getItem(N);null!==e&&m(JSON.parse(e))}catch(e){console.log(e)}},[m]);let I=(0,s.useCallback)(function(e,t){S(function(a){let s={...a,[n]:{...a[n],[e]:t}};return localStorage.setItem(C,JSON.stringify(s)),s})},[n]),E=(0,s.useCallback)(async function(e,t){try{let a=await fetch(o("".concat(n,"/").concat(e),"?ref=".concat(r)),{headers:{Authorization:"token ".concat(t||x)}}),s=await a.json();if(s.status)return;return t&&(localStorage.setItem(N,JSON.stringify(t)),m(t)),{content:c.hp.from(s.content,"base64").toString("utf8"),sha:s.sha}}catch(e){console.error(e)}},[n,y,x]),F=(0,s.useCallback)(async function(e,t,n,a){try{let s=c.hp.from(t).toString("base64"),l=await fetch(o("".concat(a,"/").concat(e)),{method:"PUT",headers:{Authorization:"token ".concat(x),"Content-Type":"application/json"},body:JSON.stringify({message:"i18n update from admin (/".concat(a,"/").concat(e,".json)"),content:s,sha:n,branch:r})}),i=await l.json();if(l.ok)return{sha:i.content.sha};console.error(i)}catch(e){console.error(e)}},[x,n]),D=(0,s.useCallback)(async function(e){if(Object.keys(w[n][e]).length>0)return;let t=await E(e);if(t)try{K(function(a){let s={...a,[n]:{...a[n],[e]:JSON.parse(t.content)}};return localStorage.setItem(v,JSON.stringify(s)),s}),I(e,t.sha)}catch(e){console.log(e)}},[E,w,K,n]),J=(0,s.useCallback)(async function(e,t){try{for(let a of(O(!0),t?d.U:[n])){let t=await F(e,JSON.stringify(w[a][e],null,2),k[a][e],a);t&&I(e,t.sha)}O(!1)}catch(e){console.log(e)}},[F,k,w,n,O]),V=(0,s.useCallback)(function(){localStorage.removeItem(N),localStorage.removeItem(v),localStorage.removeItem(C),window.location.reload()},[]),L=p()(function(e){try{localStorage.setItem(v,JSON.stringify(e))}catch(e){console.log(e)}},400),T=(0,s.useCallback)(function(e){return function(t){K(function(a){let s={...a,[n]:{...a[n],translations:{...a[n].translations,[e]:t.target.value}}};return L(s),s})}},[n,L,K]),U=(0,s.useCallback)(function(e,t){return function(a){K(function(s){let l=structuredClone(s[n][e]);l[t][a.target.name]=a.target.value;let r={...s,[n]:{...s[n],[e]:l}};return L(r),r})}},[n,L,K]),q=(0,s.useCallback)(async function(e){var t;let n=new FileReader,a=await new Promise((t,a)=>{n.onloadend=()=>{t(n.result.split(",")[1])},n.onerror=a,n.readAsDataURL(e)}),s=(t=e.name,"https://api.github.com/repos/".concat("bnz","/").concat(l,"/contents/public/data/images/").concat(t)),o=await fetch(s,{method:"PUT",headers:{Authorization:"token ".concat(x),"Content-Type":"application/json"},body:JSON.stringify({message:"upload image ".concat(s.split("contents")[1]),content:a,branch:r})});if(!o.ok)throw Error("Failed to upload image");return(await o.json()).content.path.replace("public/","/")},[x]),P=(0,s.useCallback)(async function(){return await (await fetch("https://api.github.com/repos/".concat("bnz","/").concat(l,"/contents/public/data/images"),{headers:{Authorization:"Bearer ".concat(x),Accept:"application/vnd.github.v3+json"}})).json()},[x]),A=(0,s.useCallback)(function(e,t){K(function(n){let a=structuredClone(n);return d.U.forEach(function(n){a[n][e].splice(t,1)}),L(a),a})},[K]);return(0,a.jsx)(j.Provider,{value:{loadFile:E,publishData:F,logOut:V,loadedData:w[n],setLoadedData:K,loadData:D,saveData:J,updateRecordData:T,updateArrayData:U,lang:n,publishLoading:z,setPublishLoading:O,uploadImage:q,getImagesList:P,removeFromArrayData:A,saveToLocalStorage:L},children:b?(0,a.jsx)("div",{className:"max-w-lg mx-auto flex items-center justify-center min-h-48",children:f}):x?t:(0,a.jsx)(u,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[877,406,441,684,358],()=>t(799)),_N_E=e.O()}]);