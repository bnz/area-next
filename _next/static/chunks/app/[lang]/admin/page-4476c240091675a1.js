(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{3774:(t,e,n)=>{"use strict";n.d(e,{AdminClient:()=>i});var a=n(5155),o=n(2115),s=n(4134);let c="main";function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://api.github.com/repos/".concat("bnz","/").concat("area-next","/contents/").concat("data/translations.json").concat(t)}function i(t){let{lang:e}=t,[n,i]=(0,o.useState)(""),[u,l]=(0,o.useState)(""),[h,p]=(0,o.useState)(""),[f,d]=(0,o.useState)("");async function m(){try{let t=await fetch(r("?ref=".concat(c)),{headers:{Authorization:"token ".concat(n)}}),e=await t.json(),a=s.hp.from(e.content,"base64").toString("utf8");l(a),p(e.sha)}catch(t){console.error(t),d("Ошибка при загрузке файла")}}async function b(){try{let t=s.hp.from(u).toString("base64"),e=await fetch(r(),{method:"PUT",headers:{Authorization:"token ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({message:"i18n update from admin",content:t,sha:h,branch:c})}),a=await e.json();e.ok?(p(a.content.sha),d("✅ Успешно сохранено!")):(d("❌ Ошибка при сохранении"),console.error(a))}catch(t){console.error(t),d("❌ Ошибка при сохранении")}}return(0,a.jsxs)("form",{className:"p-2 max-w-[700px] mx-auto flex flex-col gap-4",onSubmit:function(t){t.preventDefault()},children:[(0,a.jsx)("h1",{children:"Редактор JSON"}),(0,a.jsx)("input",{type:"password",placeholder:"Вставь GitHub Token",value:n,onChange:function(t){i(t.target.value)}}),(0,a.jsx)("button",{type:"button",className:"button",onClick:m,children:"Загрузить JSON"}),(0,a.jsx)("textarea",{rows:20,value:u,onChange:t=>l(t.target.value)}),(0,a.jsx)("button",{type:"submit",className:"button",onClick:b,children:"\uD83D\uDCBE Сохранить"}),(0,a.jsx)("div",{style:{marginTop:"1rem",fontWeight:"bold"},children:f})]})}},6861:(t,e,n)=>{Promise.resolve().then(n.bind(n,3774))}},t=>{var e=e=>t(t.s=e);t.O(0,[134,441,684,358],()=>e(6861)),_N_E=t.O()}]);