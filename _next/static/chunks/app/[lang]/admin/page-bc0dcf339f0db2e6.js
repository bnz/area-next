(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{3697:(t,e,n)=>{Promise.resolve().then(n.bind(n,7630))},6099:(t,e,n)=>{"use strict";n.d(e,{I18nProvider:()=>c,s:()=>r});var a=n(5155),s=n(2115);let o=(0,s.createContext)({});function c(t){let{children:e,translations:n}=t;return(0,a.jsx)(o.Provider,{value:n,children:e})}function r(t){var e;return null!=(e=(0,s.useContext)(o)[t])?e:"~".concat(t,"~")}},7630:(t,e,n)=>{"use strict";n.d(e,{Login:()=>D});var a=n(5155),s=n(2115);let o="main";function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"https://api.github.com/repos/".concat("bnz","/").concat("area-next","/contents/public/data/").concat(t,".json").concat(e)}var r=n(4134),l=n(6099);function i(){let[t,e]=(0,s.useState)(""),[n,o]=(0,s.useState)(!1),{loadFile:c}=g(),r=(0,l.s)("button.login"),i=(0,l.s)("password"),u=(0,l.s)("loading");return(0,a.jsx)("div",{className:"max-w-lg mx-auto py-36",children:(0,a.jsxs)("form",{className:"flex gap-4",onSubmit:async function(e){e.preventDefault(),o(!0),await c(f.common,t)},children:[(0,a.jsx)("input",{type:"password",placeholder:i,value:t,autoFocus:!0,onChange:function(t){e(t.target.value)}}),(0,a.jsx)("button",{disabled:n,type:"submit",className:"button",children:n?u:r})]})})}var u=n(4052),d=n.n(u),f=function(t){return t.common="common",t.translations="translations",t.features="features",t}({});let m={common:"",translations:"",features:""},h={en:m,lv:m,ru:m},x={common:{},translations:{},features:{}},p={en:x,lv:x,ru:x},b=(0,s.createContext)({async loadFile(){},async publishData(){},logOut(){},loadedData:x,setLoadedData(){},async loadData(){},async saveData(){},updateData:()=>function(){}});function g(){return(0,s.useContext)(b)}let j="loaded-data",y="sha-data",N="token";function v(t){let{children:e,lang:n}=t,u=(0,l.s)("loading"),[f,m]=(0,s.useState)(""),[x,g]=(0,s.useState)(!1),[v,S]=(0,s.useState)(h),[k,w]=(0,s.useState)(p);(0,s.useEffect)(function(){try{let t=localStorage.getItem(j);t&&w(JSON.parse(t||"{}"));let e=localStorage.getItem(y);e&&S(JSON.parse(e||"{}"))}catch(t){console.log(t)}},[w,S]),(0,s.useEffect)(function(){try{let t=localStorage.getItem(N);null!==t&&m(JSON.parse(t))}catch(t){console.log(t)}},[m]);let C=(0,s.useCallback)(async function(t,e){try{let a=await fetch(c("".concat(n,"/").concat(t),"?ref=".concat(o)),{headers:{Authorization:"token ".concat(e||f)}}),s=await a.json();if(s.status)return;return e&&(localStorage.setItem(N,JSON.stringify(e)),m(e)),{content:r.hp.from(s.content,"base64").toString("utf8"),sha:s.sha}}catch(t){console.error(t)}},[n,g,f]),O=(0,s.useCallback)(async function(t,e,a){try{let s=r.hp.from(e).toString("base64"),l=await fetch(c("".concat(n,"/").concat(t)),{method:"PUT",headers:{Authorization:"token ".concat(f),"Content-Type":"application/json"},body:JSON.stringify({message:"i18n update from admin (/".concat(n,"/").concat(t,".json)"),content:s,sha:a,branch:o})}),i=await l.json();if(l.ok)return{sha:i.content.sha};console.error(i)}catch(t){console.error(t)}},[f,n]),I=(0,s.useCallback)(async function(t){if(Object.keys(k[n][t]).length>0)return;let e=await C(t);if(e)try{w(function(a){let s={...a,[n]:{...a[n],[t]:JSON.parse(e.content)}};return localStorage.setItem(j,JSON.stringify(s)),s}),S(function(a){let s={...a,[n]:{...a[n],[t]:e.sha}};return localStorage.setItem(y,JSON.stringify(s)),s})}catch(t){console.log(t)}},[C,k,w,S,n]),D=(0,s.useCallback)(async function(t){try{await O(t,JSON.stringify(k[n][t],null,2),v[n][t])}catch(t){console.log(t)}},[O,v,k,n]),J=(0,s.useCallback)(function(){localStorage.removeItem(N),localStorage.removeItem(j),localStorage.removeItem(y),window.location.reload()},[]),E=d()(function(t){try{localStorage.setItem(j,JSON.stringify(t))}catch(t){console.log(t)}},400),z=(0,s.useCallback)(function(t){return function(e){w(function(a){let s={...a,[n]:{...a[n],translations:{...a[n].translations,[t]:e.target.value}}};return E(s),s})}},[n,E,w]);return(0,a.jsx)(b.Provider,{value:{loadFile:C,publishData:O,logOut:J,loadedData:k[n],setLoadedData:w,loadData:I,saveData:D,updateData:z},children:x?(0,a.jsx)("div",{className:"max-w-lg mx-auto flex items-center justify-center min-h-48",children:u}):f?e:(0,a.jsx)(i,{})})}var S=n(5739);function k(){let{loadedData:t,loadData:e,saveData:n,updateData:o}=g(),c=(0,l.s)("loading"),r=(0,l.s)("button.publish");(0,s.useEffect)(function(){e(f.translations)},[]);let i=t[f.translations];return 0===Object.keys(i).length?(0,a.jsx)(a.Fragment,{children:c}):(0,a.jsxs)("form",{className:"flex flex-col gap-3",onSubmit:async function(t){t.preventDefault(),await n(f.translations)},children:[Object.keys(i).map(function(t){return(0,a.jsx)("textarea",{rows:1,defaultValue:i[t],onChange:o(t),className:"min-h-8"},t)}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:"button",children:r})})]})}function w(){let{logOut:t}=g(),e=(0,l.s)("button.logout"),n=(0,l.s)("welcome");return(0,a.jsxs)("div",{className:"flex flex-row gap-3 mb-3 px-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:n}),(0,a.jsx)("button",{type:"button",className:"button ml-auto",onClick:t,children:e})]})}function C(){let t=(0,l.s)("button.add"),[e,n]=(0,s.useState)(!1),{loadData:o}=g();return(0,s.useEffect)(function(){o(f.features)},[]),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"py-3 border-t border-gray-300 dark:border-gray-700",children:e?(0,a.jsxs)("form",{className:"flex flex-col gap-3",onSubmit:function(t){t.preventDefault()},children:[(0,a.jsx)("input",{type:"text",placeholder:"Title",autoFocus:!0}),(0,a.jsx)("textarea",{rows:1,placeholder:"Description"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"button",type:"submit",children:"Save"}),(0,a.jsx)("button",{type:"button",className:"cursor-pointer",onClick:function(){n(function(t){return!t})},children:"Cancel"})]})]}):(0,a.jsx)("button",{className:"button",type:"button",onClick:function(){n(!0)},children:t})})})}var O=n(5695);function I(){let t=(0,O.useSearchParams)(),e=(0,O.useRouter)(),n=t.get("tab"),o=n?parseInt(n,10):0,[c,r]=(0,s.useState)(o);return(0,s.useEffect)(function(){e.replace("?tab=".concat(c))},[c,e]),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,a.jsx)(w,{}),(0,a.jsxs)(S.fu,{selectedIndex:c,onChange:r,className:"px-2",children:[(0,a.jsxs)(S.wb,{className:"flex gap-4 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:[(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,l.s)("tab.translations")}),(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,l.s)("tab.features")}),(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,l.s)("tab.posts")}),(0,a.jsx)(S.oz,{className:"px-3 py-2 data-selected:outline-1 cursor-pointer rounded",children:(0,l.s)("tab.contacts")})]}),(0,a.jsxs)(S.T2,{className:"mt-3 py-3",children:[(0,a.jsx)(S.Kp,{children:(0,a.jsx)(k,{})}),(0,a.jsx)(S.Kp,{children:(0,a.jsx)(C,{})}),(0,a.jsx)(S.Kp,{className:"",children:"posts tab content"}),(0,a.jsx)(S.Kp,{className:"",children:"contacts tab content"})]})]})]})}function D(t){let{lang:e}=t;return(0,a.jsx)(v,{lang:e,children:(0,a.jsx)(I,{})})}}},t=>{var e=e=>t(t.s=e);t.O(0,[965,441,684,358],()=>e(3697)),_N_E=t.O()}]);