(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{2721:(t,e,n)=>{Promise.resolve().then(n.bind(n,7220))},7220:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>u});var o=n(5155),a=n(2115),c=n(4134);let s="area-next",r="data/translations.json",i="main";function u(){let[t,e]=(0,a.useState)(""),[n,u]=(0,a.useState)(""),[l,h]=(0,a.useState)(""),[p,f]=(0,a.useState)("");async function b(){try{let e=await fetch(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://api.github.com/repos/".concat("bnz","/").concat(s,"/contents/").concat(r).concat(t)}("?ref=".concat(i)),{headers:{Authorization:"token ".concat(t)}}),n=await e.json(),o=c.hp.from(n.content,"base64").toString("utf8");u(o),h(n.sha)}catch(t){console.error(t),f("Ошибка при загрузке файла")}}async function d(){try{let e=c.hp.from(n).toString("base64"),o=await fetch("https://api.github.com/repos/".concat("bnz","/").concat(s,"/contents/").concat(r),{method:"PUT",headers:{Authorization:"token ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({message:"Обновление перевода через админку",content:e,sha:l,branch:i})}),a=await o.json();o.ok?(h(a.content.sha),f("✅ Успешно сохранено!")):(f("❌ Ошибка при сохранении"),console.error(a))}catch(t){console.error(t),f("❌ Ошибка при сохранении")}}return(0,o.jsxs)("form",{className:"p-2 max-w-[700px] mx-auto flex flex-col gap-4",onSubmit:function(t){t.preventDefault()},children:[(0,o.jsx)("h1",{children:"Редактор JSON"}),(0,o.jsx)("input",{type:"password",placeholder:"Вставь GitHub Token",value:t,onChange:function(t){e(t.target.value)}}),(0,o.jsx)("button",{type:"button",className:"button",onClick:b,children:"Загрузить JSON"}),(0,o.jsx)("textarea",{rows:20,value:n,onChange:t=>u(t.target.value)}),(0,o.jsx)("button",{type:"submit",className:"button",onClick:d,children:"\uD83D\uDCBE Сохранить"}),(0,o.jsx)("div",{style:{marginTop:"1rem",fontWeight:"bold"},children:p})]})}}},t=>{var e=e=>t(t.s=e);t.O(0,[134,441,684,358],()=>e(2721)),_N_E=t.O()}]);